name: "Pull Request"
permissions:
  contents: read

on:
  pull_request:
    types: [assigned, opened, synchronize, reopened]
    paths-ignore:
      - '**.md'

jobs:

  dependabot-job:
    name: "Dependabot"
    runs-on: ubuntu-latest
    if: github.event.pull_request.user.login == 'dependabot[bot]' && github.repository == 'libsdl-org/SDL'
    steps:
      - name: "Dependabot metadata"
        id: "dependabot-metadata"
        uses: dependabot/fetch-metadata@v2

  dependabot-bindgen-job:
    name: "Dependabot Bindgen"
    needs: [dependabot-job]
    uses: "./.github/workflows/bindgen.yml"

  dependabot-commit-job:
    name: "Dependabot Commit"
    needs: [dependabot-bindgen-job]
    permissions:
      contents: write
    uses: "./.github/workflows/commit.yml"

  not-dependabot-build-job:
    name: "Build"
    uses: "./.github/workflows/build.yml"
    if: github.event.pull_request.user.login != 'dependabot[bot]'
